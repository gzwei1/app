{"version":3,"sources":["utils/setAuthToken.js","actions/types.js","actions/alert.js","utils/consts.js","actions/auth.js","componets/layout/navbar/index.js","actions/zipCode.js","componets/layout/landing/images/index.js","componets/layout/landing/directions/direction/index.js","componets/layout/landing/directions/index.js","actions/post.js","img/spinner.gif","componets/layout/spinner/index.js","componets/posts/postItem.js","componets/posts/getPosts.js","componets/layout/landing/index.js","componets/auth/register.js","componets/auth/login.js","componets/layout/alert/index.js","componets/post/commentForm.js","componets/post/commentItem.js","componets/post/image.js","componets/post/post.js","componets/posts/sendPost.js","componets/routing/privateRoute.js","reducers/alert.js","reducers/auth.js","reducers/post.js","reducers/zipCode.js","reducers/index.js","store.js","App.js","index.js"],"names":["setAuthToken","token","axios","defaults","headers","common","SET_ALERT","REMOVE_ALERT","REGISTER_SUCCESS","REGISTER_FAIL","USER_LOADED","AUTH_ERROR","LOGIN_SUCCESS","LOGIN_FAIL","LOG_OUT","GET_POSTS","POST_ERROR","CHANGE_ZIPCODE","CHANGE_PAGE","LOADING","DELETE_POST","GET_POST","ADD_COMMENT","REMOVE_COMMENT","setAlert","msg","alertType","timeout","dispatch","id","uuid","type","payload","setTimeout","PROXY","loadUser","a","localStorage","get","res","data","connect","state","auth","zipCode","logout","changeZip","zip","isAuthenticated","loading","authLinks","to","className","onClick","guestLinks","post","prop","posts","images","history","useHistory","forEach","push","original","imageUrl","url","e","index","string","target","src","slice","length","i","_id","items","showFullscreenButton","showPlayButton","showNav","showBullets","showThumbnails","autoPlay","content","loadingf","deletePost","delete","response","statusText","status","Spinner","spinner","style","width","margin","display","alt","text","name","user","postDate","comments","price","year","odo","make","border","position","marginTop","background","right","class","marginBottom","format","getPosts","query","console","log","changePage","nop","current","count","match","useState","pricemin","pricemax","yearmin","yearmax","odomax","sorted","formData","setFormData","onChange","value","params","useEffect","JSON","stringify","fil","page","changeP","padding","textAlign","fontSize","color","map","disabled","Math","ceil","float","landing","register","email","password","config","body","errors","error","password2","action","onSubmit","preventDefault","placeholder","required","minLength","login","alerts","alert","addComment","postId","setText","cols","rows","multiple","deleteComment","commentId","comment","date","Index","getPost","el","t1","model","names","files","newPost","FormData","file","append","err","maxLength","document","getElementById","click","Array","from","inputChange","closest","newFiles","filter","newNames","deleteFile","Component","component","rest","render","props","initalState","initialState","getItem","combineReducers","setItem","removeItem","currentposts","docs","middleware","thunk","store","createStore","rootReducer","composeWithDevTools","applyMiddleware","App","basename","exact","path","Landing","Register","Login","sendPost","Post","ReactDOM","StrictMode"],"mappings":"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","file":"static/js/main.db560175.chunk.js","sourcesContent":["import axios from 'axios';\r\n\r\nconst setAuthToken = (token) => {\r\n  if (token) {\r\n    axios.defaults.headers.common['x-auth-token'] = token;\r\n  } else {\r\n    delete axios.defaults.headers.common['x-auth.token'];\r\n  }\r\n};\r\n\r\nexport default setAuthToken;\r\n\r\n//this is a global header\r\n","export const SET_ALERT = 'SET_ALERT';\r\nexport const REMOVE_ALERT = 'REMOVE_ALERT';\r\nexport const REGISTER_SUCCESS = 'REGISTER_SUCCESS';\r\nexport const REGISTER_FAIL = 'REGISTER_FAIL';\r\nexport const USER_LOADED = 'USER_LOADED';\r\nexport const AUTH_ERROR = 'AUTH_ERROR';\r\nexport const LOGIN_SUCCESS = 'LOGIN_SUCCESS';\r\nexport const LOGIN_FAIL = 'LOGIN_FAIL';\r\nexport const LOG_OUT = 'LOG_OUT';\r\nexport const GET_POSTS = 'GET_POSTS';\r\nexport const POST_ERROR = 'POST_ERROR';\r\nexport const CHANGE_ZIPCODE = 'CHANGE_ZIPCODE';\r\n// export const GET_NEXT = 'GET_NEXT';\r\n// export const GET_PRE = 'GET_PRE';\r\nexport const CHANGE_PAGE = 'CHANGE_PAGE';\r\nexport const LOADING = 'LOADING';\r\nexport const DELETE_POST = 'DELETE_POST';\r\nexport const GET_POST = 'GET_POST';\r\nexport const ADD_COMMENT = 'ADD_COMMENT';\r\nexport const REMOVE_COMMENT = 'REMOVE_COMMET';\r\n","import { v4 as uuid } from 'uuid';\r\nimport { SET_ALERT, REMOVE_ALERT } from './types';\r\n\r\n//don't have to import thunk here. used in store.js. => =>is just a curried function.\r\n//https://olinations.medium.com/creating-a-function-factory-using-javascript-currying-3e4038b64719\r\n//https://daveceddia.com/what-is-a-thunk/\r\n//https://stackoverflow.com/questions/32782922/what-do-multiple-arrow-functions-mean-in-javascript\r\nexport const setAlert = (msg, alertType, timeout = 5000) => (dispatch) => {\r\n  const id = uuid();\r\n  dispatch({\r\n    type: SET_ALERT,\r\n    payload: {\r\n      msg,\r\n      alertType,\r\n      id,\r\n    },\r\n  });\r\n\r\n  setTimeout(() => {\r\n    dispatch({ type: REMOVE_ALERT, payload: id });\r\n  }, timeout);\r\n};\r\n","export const PROXY = 'https://alienstax.com:9009';\r\n// export const PROXY = 'http://localhost:5000';\r\n","import axios from 'axios';\r\nimport setAuthToken from '../utils/setAuthToken';\r\nimport { setAlert } from './alert';\r\nimport {\r\n  REGISTER_SUCCESS,\r\n  REGISTER_FAIL,\r\n  USER_LOADED,\r\n  AUTH_ERROR,\r\n  LOGIN_SUCCESS,\r\n  LOGIN_FAIL,\r\n  LOG_OUT,\r\n} from './types';\r\nimport { PROXY } from '../utils/consts';\r\n\r\n//load user\r\nexport const loadUser = () => async (dispatch) => {\r\n  if (localStorage.token) {\r\n    setAuthToken(localStorage.token);\r\n  }\r\n  try {\r\n    const res = await axios.get(`${PROXY}/api/auth`);\r\n    dispatch({ type: USER_LOADED, payload: res.data });\r\n  } catch (err) {\r\n    dispatch({ type: AUTH_ERROR });\r\n  }\r\n};\r\n\r\n//register user\r\nexport const register = ({ name, email, password }) => async (dispatch) => {\r\n  const config = {\r\n    headers: { 'Content-Type': 'application/json' },\r\n  };\r\n  const body = JSON.stringify({ name, email, password });\r\n\r\n  try {\r\n    const res = await axios.post(`${PROXY}/api/users`, body, config);\r\n    console.log(`${PROXY}/api/auth`);\r\n    dispatch({\r\n      type: REGISTER_SUCCESS,\r\n      payload: res.data,\r\n    });\r\n    dispatch(loadUser());\r\n  } catch (err) {\r\n    const errors = err.response.data.errors;\r\n\r\n    if (errors) {\r\n      errors.forEach((error) => dispatch(setAlert(error.msg, 'danger')));\r\n    }\r\n    dispatch({\r\n      type: REGISTER_FAIL,\r\n    });\r\n  }\r\n};\r\n\r\n//login user\r\nexport const login = ({ email, password }) => async (dispatch) => {\r\n  const config = {\r\n    headers: { 'Content-Type': 'application/json' },\r\n  };\r\n  const body = JSON.stringify({ email, password });\r\n\r\n  try {\r\n    const res = await axios.post(`${PROXY}/api/auth`, body, config);\r\n    dispatch({\r\n      type: LOGIN_SUCCESS,\r\n      payload: res.data,\r\n    });\r\n    dispatch(loadUser());\r\n  } catch (err) {\r\n    const errors = err.response.data.errors;\r\n\r\n    if (errors) {\r\n      errors.forEach((error) => dispatch(setAlert(error.msg, 'danger')));\r\n    }\r\n    dispatch({\r\n      type: LOGIN_FAIL,\r\n    });\r\n  }\r\n};\r\n\r\n// logout / clear profile\r\nexport const logout = () => (dispatch) => {\r\n  dispatch({ type: LOG_OUT });\r\n};\r\n","import React, { Fragment } from 'react';\r\nimport { Link } from 'react-router-dom';\r\nimport './index.css';\r\nimport { connect } from 'react-redux';\r\nimport PropTypes from 'prop-types';\r\nimport { logout } from '../../../actions/auth';\r\nimport { changeZip } from '../../../actions/zipCode';\r\n\r\nconst navbar = ({\r\n  auth: { isAuthenticated, loading }, //什么语法？\r\n  logout,\r\n  changeZip,\r\n  zipCode,\r\n}) => {\r\n  const authLinks = (\r\n    <ul>\r\n      <li>\r\n        <Link to='/send'>\r\n          <span className=''>发布信息</span>{' '}\r\n        </Link>\r\n      </li>\r\n      <li>\r\n        <Link to='/' onClick={logout}>\r\n          <i className='fas fa-sign-out-alt' />{' '}\r\n          <span className=''>退出登录</span>{' '}\r\n        </Link>\r\n      </li>\r\n    </ul>\r\n  );\r\n\r\n  const guestLinks = (\r\n    <ul>\r\n      <li>\r\n        <Link to='/send'>\r\n          <span className=''>发布信息</span>{' '}\r\n        </Link>\r\n      </li>\r\n      <li>\r\n        <Link to='/register'>注册</Link>\r\n      </li>\r\n      <li>\r\n        <Link to='/login'>登录</Link>\r\n      </li>\r\n    </ul>\r\n  );\r\n\r\n  const onChange = (e) => {\r\n    changeZip(e.target.value);\r\n  };\r\n\r\n  const changeZ = () => {\r\n    document.querySelector('#zip').classList.toggle('editZip');\r\n    // document.querySelector('#zip2').classList.toggle('editZip2');\r\n  };\r\n\r\n  const focusOut = () => {\r\n    document.querySelector('#zip').classList.add('editZip');\r\n    // document.querySelector('#zip2').classList.toggle('editZip2');\r\n  };\r\n\r\n  return (\r\n    <nav className='navbar bg-dark'>\r\n      <ul id='logo'>\r\n        <li>\r\n          <Link to='/'>任意门</Link>\r\n          <span className='ns-1'>连接在美华人</span>\r\n          {/* {zipCode}{' '}\r\n          <span className='' id='zip2'>\r\n            <input\r\n              className='editZip'\r\n              type='text'\r\n              id='zip'\r\n              onChange={(e) => onChange(e)}\r\n              onBlur={() => focusOut()}\r\n              maxLength={5}\r\n              style={{\r\n                width: '50px',\r\n                border: 'none',\r\n                background: 'rgb(160,160,160)',\r\n              }}\r\n            />{' '}\r\n            <i\r\n              className='far fa-edit'\r\n              onClick={() => {\r\n                changeZ();\r\n              }}\r\n            />\r\n          </span> */}\r\n        </li>\r\n      </ul>\r\n      {!loading && (\r\n        <Fragment>{isAuthenticated ? authLinks : guestLinks}</Fragment>\r\n      )}\r\n    </nav>\r\n  );\r\n};\r\nnavbar.propTypes = {\r\n  logout: PropTypes.func.isRequired,\r\n  auth: PropTypes.object.isRequired,\r\n  zipCode: PropTypes.number.isRequired, //PTNR\r\n};\r\nconst mapStateToProps = (state) => ({\r\n  auth: state.auth,\r\n  zipCode: state.zipCode.zipCode,\r\n});\r\n\r\nexport default connect(mapStateToProps, { logout, changeZip })(navbar);\r\n","import { CHANGE_ZIPCODE } from './types';\r\n\r\nexport const changeZip = (zip) => (dispatch) => {\r\n  dispatch({\r\n    type: CHANGE_ZIPCODE,\r\n    payload: {\r\n      zip: zip,\r\n    },\r\n  });\r\n};\r\n// export const zipCode = (dispatch) => {\r\n//   return {\r\n//     zipCode: () =>\r\n//       dispatch({\r\n//         type: SET_ALERT,\r\n//         payload: {\r\n//           msg,\r\n//           alertType,\r\n//           id,\r\n//         },\r\n//       }),\r\n//   };\r\n// };\r\n","import ImageGallery from 'react-image-gallery';\r\nimport React, { Fragment, useCallback } from 'react';\r\nimport 'react-image-gallery/styles/css/image-gallery.css';\r\nimport './index.css';\r\n// import image1 from '../../../../img/image1.jpg';\r\n// import image2 from '../../../../img/image2.jpg';\r\n// import image3 from '../../../../img/image3.jpg';\r\n// import image4 from '../../../../img/image4.jpg';\r\n// import image5 from '../../../../img/image5.jpg';\r\nimport { PROXY } from '../../../../utils/consts';\r\nimport { connect } from 'react-redux';\r\nimport { Link, useHistory } from 'react-router-dom';\r\n\r\n//这里之前是post，错了，应该是prop\r\nconst Index = (prop) => {\r\n  // const images = [\r\n  //   {\r\n  //     original: image1,\r\n  //   },\r\n  //   {\r\n  //     original: image2,\r\n  //   },\r\n  //   {\r\n  //     original: image3,\r\n  //   },\r\n  //   {\r\n  //     original: image4,\r\n  //   },\r\n  //   {\r\n  //     original: image5,\r\n  //   },\r\n  // ];\r\n  const posts = prop.post.posts;\r\n  const images = [];\r\n\r\n  //https://stackoverflow.com/questions/29244731/react-router-how-to-manually-invoke-link\r\n  const history = useHistory();\r\n\r\n  //https://stackoverflow.com/questions/29244731/react-router-how-to-manually-invoke-link\r\n\r\n  const onClick = (e) => {\r\n    const string = e.target.src.slice(PROXY.length + 1);\r\n    let index;\r\n    for (let i = 0; i <= posts.length; i++) {\r\n      if (posts[i].imageUrl[0].url === string) {\r\n        index = i;\r\n        break;\r\n      }\r\n    }\r\n    history.push(`/posts/${posts[index].type}/${posts[index]._id}`);\r\n  };\r\n\r\n  posts.forEach((post) =>\r\n    images.push({\r\n      original: post.imageUrl[0] ? PROXY + '/' + post.imageUrl[0].url : null,\r\n    })\r\n  );\r\n  return (\r\n    <div className='imgwrapper'>\r\n      <ImageGallery\r\n        onClick={(e) => onClick(e)}\r\n        items={images}\r\n        showFullscreenButton={false}\r\n        showPlayButton={false}\r\n        showNav={false}\r\n        showBullets={true}\r\n        showThumbnails={false}\r\n        autoPlay={true}\r\n      />\r\n    </div>\r\n  );\r\n};\r\n\r\nconst mapStateToProps = (state) => ({\r\n  post: state.post,\r\n});\r\n\r\nexport default connect(mapStateToProps)(Index);\r\n","import React from 'react';\r\nimport './index.css';\r\nimport { Link } from 'react-router-dom';\r\n\r\nfunction index({ content }) {\r\n  return (\r\n    <Link className='Direction' to={'/posts/' + content}>\r\n      {content}\r\n      {/* <span className='D-S' onClick={() => onClick()}>\r\n        </span> 这里直接去post就可以了。 */}\r\n    </Link>\r\n  );\r\n}\r\n\r\nexport default index;\r\n","import React from 'react';\r\nimport './index.css';\r\nimport Direction from './direction';\r\n\r\nfunction index() {\r\n  return (\r\n    <div id='Directions'>\r\n      <Direction content={'闲置'} />\r\n      <Direction content={'租房'} />\r\n      <Direction content={'求助'} />\r\n      <Direction content={'二手车'} />\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default index;\r\n","import axios from 'axios';\r\nimport { setAlert } from './alert';\r\nimport {\r\n  GET_POSTS,\r\n  POST_ERROR,\r\n  CHANGE_PAGE,\r\n  LOADING,\r\n  DELETE_POST,\r\n  GET_POST,\r\n  ADD_COMMENT,\r\n  REMOVE_COMMENT,\r\n} from './types';\r\nimport { PROXY } from '../utils/consts';\r\n\r\n//get posts\r\nexport const getPosts = ({ query }) => async (dispatch) => {\r\n  try {\r\n    const res = await axios.get(`${PROXY}/api/post/${query}`); //这里query必须JSON格式\r\n    console.log(query);\r\n    dispatch({\r\n      type: GET_POSTS,\r\n      payload: res.data,\r\n    });\r\n  } catch (err) {\r\n    dispatch({\r\n      type: POST_ERROR,\r\n      payload: { msg: err.response.statusText, status: err.response.status },\r\n    });\r\n  }\r\n};\r\n\r\n// export const getNext = ({ query }) => async (dispatch) => {\r\n//   try {\r\n//     const res = await axios.get(`/api/post/${query}`);\r\n\r\n//     console.log(res.data);\r\n//     dispatch({\r\n//       type: GET_NEXT,\r\n//       payload: res.data,\r\n//     });\r\n//   } catch (err) {}\r\n// };\r\n\r\n// export const getPre = ({ query }) => async (dispatch) => {\r\n//   try {\r\n//     const res = await axios.get(`/api/post/${query}`);\r\n//     console.log(res.data);\r\n//     dispatch({\r\n//       type: GET_PRE,\r\n//       payload: res.data,\r\n//     });\r\n//   } catch (err) {}\r\n// };\r\n\r\nexport const changePage = ({ query, nop }) => async (dispatch) => {\r\n  try {\r\n    const res = await axios.get(`${PROXY}/api/post/${query}`);\r\n\r\n    dispatch({\r\n      type: CHANGE_PAGE,\r\n      payload: res.data,\r\n    });\r\n  } catch (err) {}\r\n};\r\n\r\nexport const loadingf = () => async (dispatch) => {\r\n  dispatch({ type: LOADING });\r\n};\r\n\r\nexport const deletePost = (id) => async (dispatch) => {\r\n  try {\r\n    const res = await axios.delete(`${PROXY}/api/post/${id}`);\r\n    dispatch({\r\n      type: DELETE_POST,\r\n      payload: id,\r\n    });\r\n    dispatch(setAlert('Post removed', 'success'));\r\n  } catch (err) {\r\n    dispatch({\r\n      type: POST_ERROR,\r\n      payload: { msg: err.response.statusText, status: err.response.status },\r\n    });\r\n  }\r\n};\r\n\r\n//get single post\r\n//get posts\r\nexport const getPost = ({ query }) => async (dispatch) => {\r\n  try {\r\n    const res = await axios.get(`${PROXY}/api/post/${query}`); //这里query必须JSON格式\r\n    console.log(res);\r\n    // console.log(query);\r\n    // console.log(res.data);\r\n    dispatch({\r\n      type: GET_POST,\r\n      payload: res.data,\r\n    });\r\n  } catch (err) {\r\n    dispatch({\r\n      type: POST_ERROR,\r\n      payload: { msg: err.response.statusText, status: err.response.status },\r\n    });\r\n  }\r\n};\r\n\r\nexport const addComment = (postId, formData) => async (dispatch) => {\r\n  const config = { headers: { 'Content-Type': 'application/json' } };\r\n  try {\r\n    const res = await axios.post(\r\n      `${PROXY}/api/post/comment/${postId}`,\r\n      formData,\r\n      config\r\n    );\r\n    dispatch({\r\n      type: ADD_COMMENT,\r\n      payload: res.data,\r\n    });\r\n    dispatch(setAlert('回复成功', 'success'));\r\n  } catch (err) {\r\n    dispatch({\r\n      type: POST_ERROR,\r\n      payload: { msg: err.response.statusText, status: err.response.status },\r\n    });\r\n    const error = err.response.data;\r\n\r\n    dispatch(setAlert(error.msg, 'danger'));\r\n  }\r\n};\r\n\r\nexport const deleteComment = (postId, commentId) => async (dispatch) => {\r\n  try {\r\n    const res = await axios.delete(\r\n      `${PROXY}/api/post/comment/${postId}/${commentId}`\r\n    );\r\n    dispatch({\r\n      type: REMOVE_COMMENT,\r\n      payload: commentId,\r\n    });\r\n    dispatch(setAlert('Comment deleted', 'success'));\r\n  } catch (err) {\r\n    dispatch({\r\n      type: POST_ERROR,\r\n      payload: { msg: err.response.statusText, status: err.response.status },\r\n    });\r\n  }\r\n};\r\n","export default __webpack_public_path__ + \"static/media/spinner.b9db43a8.gif\";","import React, { Fragment } from 'react';\r\nimport spinner from '../../../img/spinner.gif';\r\n\r\nconst Spinner = () => (\r\n  <Fragment>\r\n    <img\r\n      src={spinner}\r\n      style={{ width: '200px', margin: 'auto', display: 'block' }}\r\n      alt='Loading...'\r\n    />\r\n  </Fragment>\r\n);\r\n\r\nexport default Spinner;\r\n","import React, { Fragment } from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport { Link } from 'react-router-dom';\r\nimport Moment from 'react-moment';\r\nimport { connect } from 'react-redux';\r\nimport { deletePost } from '../../actions/post';\r\nimport { PROXY } from '../../utils/consts';\r\nimport path from 'path';\r\n\r\nconst PostItem = ({\r\n  // showButton = true, vs propDefault?\r\n  deletePost,\r\n  auth,\r\n  post: {\r\n    _id,\r\n    text,\r\n    name,\r\n    user,\r\n    comments,\r\n    postDate,\r\n    imageUrl,\r\n    type,\r\n    price,\r\n    year,\r\n    odo,\r\n    make,\r\n  },\r\n}) => {\r\n  // console.log(user === auth.user._id);\r\n  return (\r\n    <div\r\n      style={{\r\n        border: '1px solid rgb(200,200,200',\r\n        position: 'relative',\r\n        marginTop: 20,\r\n      }}\r\n    >\r\n      {!auth.loading && user === (auth.user ? auth.user._id : null) && (\r\n        <button\r\n          style={{\r\n            border: 'none',\r\n            background: 'white',\r\n            position: 'absolute',\r\n            right: 10,\r\n          }}\r\n          onClick={() => deletePost(_id)}\r\n        >\r\n          <i class='fas fa-backspace'></i>\r\n        </button>\r\n      )}\r\n\r\n      <div\r\n        className='post bg-white p-1 my-1'\r\n        style={{ border: 'none', marginBottom: 0 }}\r\n      >\r\n        <div>\r\n          <img\r\n            src={imageUrl[0] ? PROXY + '/' + imageUrl[0].url : null}\r\n            alt=''\r\n          />\r\n        </div>\r\n        <div>\r\n          <p className='my-10'>{text}</p>\r\n\r\n          <p className='post-date'>\r\n            {name} 发布于：\r\n            <Moment format='YYYY/MM/DD  h:mm:ss a'>{postDate}</Moment>\r\n          </p>\r\n\r\n          {type === '二手车' ? (\r\n            <p className='post-date'>\r\n              年份：{year} 价格：{price} 里程：{odo} 厂商：{make}\r\n            </p>\r\n          ) : null}\r\n\r\n          <Link to={`/posts/${type}/${_id}`} className='btn btn-primary'>\r\n            查看详情\r\n          </Link>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nPostItem.propTypes = {\r\n  post: PropTypes.object.isRequired,\r\n  auth: PropTypes.object.isRequired,\r\n  deletePost: PropTypes.func.isRequired,\r\n};\r\n\r\nconst mapStateToProps = (state) => ({\r\n  auth: state.auth,\r\n});\r\n\r\nexport default connect(mapStateToProps, { deletePost })(PostItem);\r\n","import React, { useState, Fragment, useEffect } from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport { connect } from 'react-redux';\r\nimport { getPosts, changePage, loadingf } from '../../actions/post';\r\nimport Spinner from '../layout/spinner';\r\nimport PostItem from './postItem.js';\r\n\r\nimport './getPosts.css';\r\n\r\n//get posts of a certain type\r\nconst GetPosts = ({\r\n  loadingf,\r\n  getPosts,\r\n  changePage,\r\n  post: { posts, loading, current, count },\r\n  zipCode,\r\n  match,\r\n}) => {\r\n  const [formData, setFormData] = useState({\r\n    pricemin: '',\r\n    pricemax: '',\r\n    yearmin: '',\r\n    yearmax: '',\r\n    odomax: '',\r\n    sorted: false,\r\n  });\r\n\r\n  //搜索参数\r\n  const onChange = (e) => {\r\n    setFormData({ ...formData, [e.target.name]: e.target.value });\r\n    console.log(formData);\r\n  };\r\n\r\n  const { pricemax, pricemin, yearmin, yearmax, odomax } = formData;\r\n\r\n  //进入页面按类加载\r\n  if (match) {\r\n    var type = match.params.type;\r\n  } else type = null;\r\n  useEffect(() => {\r\n    loadingf(); //important\r\n    const query = JSON.stringify({ zipCode, type, fil: null, page: 1 });\r\n    console.log(getPosts); //without passing in to function, get itself.\r\n    getPosts({ query });\r\n    // Line 60:6:  React Hook useEffect has missing dependencies: 'current', 'loadingf',\r\n    //and 'type'. Either include them or remove the dependency array. If 'loadingf'\r\n    //changes too often, find the parent component that defines it and wrap\r\n    // that definition in useCallback  react-hooks/exhaustive-deps\r\n  }, []);\r\n  //[getPosts, loadingf, current, type]:重复加载。\r\n\r\n  //发送搜索请求\r\n  const sortPost = () => {\r\n    loadingf();\r\n    const query = JSON.stringify({\r\n      zipCode,\r\n      fil: {\r\n        pricemax,\r\n        pricemin,\r\n        yearmin,\r\n        yearmax,\r\n        odomax,\r\n      },\r\n      type,\r\n      page: 1,\r\n    });\r\n    setFormData({ ...formData, sorted: true });\r\n    getPosts({ query });\r\n  };\r\n\r\n  //翻页\r\n  const changeP = (nop) => {\r\n    loadingf();\r\n    const query = JSON.stringify({\r\n      zipCode,\r\n      type: type,\r\n      fil: formData.sorted\r\n        ? {\r\n            pricemax,\r\n            pricemin,\r\n            yearmin,\r\n            yearmax,\r\n            odomax,\r\n          }\r\n        : null,\r\n      page: current + nop,\r\n    });\r\n    changePage({ query });\r\n  };\r\n\r\n  return loading || posts.length === null ? (\r\n    <Spinner />\r\n  ) : (\r\n    <section className='container'>\r\n      <p\r\n        className='hp'\r\n        style={\r\n          type\r\n            ? null\r\n            : {\r\n                padding: 5,\r\n                textAlign: 'center',\r\n                fontSize: '30px',\r\n                background: '#17a2b8',\r\n                color: 'white',\r\n              }\r\n        }\r\n      >\r\n        <span className='hps'> {type ? type : '所有'}信息</span>{' '}\r\n        <span className='hpss'>\r\n          测试版本仅支持湾区(San Jose, San Francisco,\r\n          Oakland)，其他地区和范围搜索功能陆续上线中\r\n        </span>\r\n        {/* {zipCode}\r\n        <span className='hps'> 附近的{type ? type : '所有'}信息</span> */}\r\n      </p>\r\n      {type === '二手车' ? (\r\n        <div className='sd-1'>\r\n          <div className='sd-2'>\r\n            <p className='sp-1'>\r\n              价格\r\n              <span className='ss-1'>\r\n                <span className='ss-2'>\r\n                  最低{' '}\r\n                  <input\r\n                    name='pricemin'\r\n                    type='text'\r\n                    onChange={(e) => {\r\n                      onChange(e);\r\n                    }}\r\n                    className='sb-1'\r\n                  />{' '}\r\n                </span>\r\n                <span className='ss-3'>\r\n                  最高{' '}\r\n                  <input\r\n                    name='pricemax'\r\n                    onChange={(e) => {\r\n                      onChange(e);\r\n                    }}\r\n                    type='text'\r\n                    className='sb-2'\r\n                  />\r\n                </span>\r\n              </span>\r\n            </p>\r\n            <p className='sp-1'>\r\n              年份\r\n              <span className='ss-1'>\r\n                <span className='ss-2'>\r\n                  最早{' '}\r\n                  <input\r\n                    name='yearmin'\r\n                    onChange={(e) => {\r\n                      onChange(e);\r\n                    }}\r\n                    type='text'\r\n                    className='sb-1'\r\n                  />{' '}\r\n                </span>\r\n                <span className='ss-3'>\r\n                  最晚{' '}\r\n                  <input\r\n                    name='yearmax'\r\n                    onChange={(e) => {\r\n                      onChange(e);\r\n                    }}\r\n                    type='text'\r\n                    className='sb-2'\r\n                  />\r\n                </span>\r\n              </span>\r\n            </p>\r\n            {/* <p className='sp-2'>\r\n              厂商\r\n              <span className='ss-1'>\r\n                <span className='ss-2'>\r\n                  <input type='text' className='sb-2' />\r\n                </span>\r\n              </span>\r\n            </p> */}\r\n            <p className='sp-2'>\r\n              里程\r\n              <span className='ss-1'>\r\n                <span className='ss-2'>\r\n                  最大{' '}\r\n                  <input\r\n                    onChange={(e) => {\r\n                      onChange(e);\r\n                    }}\r\n                    name='odomax'\r\n                    type='text'\r\n                    className='sb-2'\r\n                  />\r\n                </span>\r\n              </span>\r\n            </p>\r\n          </div>\r\n          <div className='sd-3'>\r\n            <button onClick={sortPost}>筛选</button>\r\n          </div>\r\n        </div>\r\n      ) : null}\r\n      {/* Postform */}\r\n      <div className='posts'>\r\n        {posts.map((\r\n          post //?\r\n        ) => (\r\n          <PostItem key={post._id} post={post} />\r\n        ))}\r\n      </div>\r\n      <div className='gd-1'>\r\n        <button\r\n          onClick={() => {\r\n            loadingf(); //important\r\n            const query = JSON.stringify({ zipCode, type, fil: null, page: 1 });\r\n            console.log(getPosts); //without passing in to function, get itself.\r\n            getPosts({ query });\r\n          }}\r\n          className='gb-1'\r\n          disabled={current === 1 ? true : false}\r\n        >\r\n          首页\r\n        </button>\r\n        <button\r\n          onClick={() => changeP(-1)}\r\n          className='gb-1'\r\n          disabled={current === 1 ? true : false}\r\n        >\r\n          上页\r\n        </button>\r\n        第{current}页，共{Math.ceil(count / 5)}页\r\n        <button\r\n          className='gb-2'\r\n          onClick={() => changeP(1)}\r\n          style={{ float: 'right' }}\r\n          disabled={count / 5 >= current ? false : true}\r\n        >\r\n          下页\r\n        </button>\r\n      </div>\r\n    </section>\r\n  );\r\n};\r\n\r\nGetPosts.propTypes = {\r\n  getPosts: PropTypes.func.isRequired,\r\n  changePage: PropTypes.func.isRequired,\r\n  post: PropTypes.object.isRequired,\r\n  zipCode: PropTypes.number.isRequired,\r\n  loadingf: PropTypes.func.isRequired,\r\n};\r\n\r\nconst mapStateToProps = (state) => ({\r\n  post: state.post,\r\n  zipCode: state.zipCode.zipCode,\r\n});\r\nexport default connect(mapStateToProps, { getPosts, changePage, loadingf })(\r\n  GetPosts\r\n);\r\n","import React from 'react';\r\nimport './index.css';\r\nimport Images from './images';\r\nimport Directions from './directions';\r\nimport { Fragment } from 'react';\r\nimport GetPosts from '../../posts/getPosts';\r\n\r\nconst landing = () => {\r\n  return (\r\n    <Fragment>\r\n      <div className='landing'>\r\n        <Images />\r\n        <Directions />\r\n      </div>\r\n      <GetPosts />\r\n    </Fragment>\r\n  );\r\n};\r\n\r\nexport default landing;\r\n","import React, { Fragment, useState } from 'react';\r\nimport { Link, Redirect } from 'react-router-dom';\r\nimport { connect } from 'react-redux';\r\nimport { setAlert } from '../../actions/alert';\r\nimport { register } from '../../actions/auth';\r\nimport PropTypes from 'prop-types';\r\n// import axios from 'axios';\r\n\r\nconst Register = ({ setAlert, register, isAuthenticated }) => {\r\n  //register: error\r\n  const [formData, setFormData] = useState({\r\n    name: '',\r\n    email: '',\r\n    password: '',\r\n    password2: '',\r\n  });\r\n\r\n  const { name, email, password, password2 } = formData;\r\n\r\n  // const onChange = (e) => {\r\n  //   setFormData({ ...formData, [e.target.name]: e.target.value });\r\n  // }; doesnt work in Edge -> solution:babel plugin\r\n\r\n  const onChange = (e) => {\r\n    setFormData({ ...formData, [e.target.name]: e.target.value });\r\n  };\r\n\r\n  const onSubmit = (e) => {\r\n    e.preventDefault();\r\n    if (password !== password2) {\r\n      setAlert('password dont match', 'danger', 1000);\r\n    } else {\r\n      // const newUser = { name, email, password };\r\n      // try {\r\n      //   const config = {\r\n      //     headers: {\r\n      //       'Content-Type': 'application/json',\r\n      //     },\r\n      //   };\r\n      //   const body = JSON.stringify(newUser);\r\n      //   const res = await axios.post('/api/users', body, config); //port? same server?---package.json-proxy\r\n      //   console.log(res.data);\r\n      // } catch (err) {\r\n      //   console.error(err.response.data);\r\n      // }\r\n      register({ name, email, password });\r\n    }\r\n  };\r\n\r\n  //redirect if logged in\r\n  if (isAuthenticated) {\r\n    return <Redirect to='/send' />;\r\n  }\r\n\r\n  return (\r\n    <section className='container'>\r\n      <h1 className='large text-primary'>注册 APP</h1>\r\n      <p className='lead'>\r\n        <i className='fas fa-user'></i> 创建账户\r\n      </p>\r\n      <form className='form' action='/send' onSubmit={(e) => onSubmit(e)}>\r\n        <div className='form-group'>\r\n          <input\r\n            type='text'\r\n            placeholder='用户名'\r\n            name='name'\r\n            value={name}\r\n            onChange={(e) => onChange(e)}\r\n            required\r\n          />\r\n        </div>\r\n        <div className='form-group'>\r\n          <input\r\n            type='email'\r\n            placeholder='邮箱'\r\n            name='email'\r\n            value={email}\r\n            onChange={(e) => onChange(e)}\r\n          />\r\n        </div>\r\n        <div className='form-group'>\r\n          <input\r\n            type='password'\r\n            placeholder='密码'\r\n            name='password'\r\n            minLength='6'\r\n            value={password}\r\n            onChange={(e) => onChange(e)}\r\n          />\r\n        </div>\r\n        <div className='form-group'>\r\n          <input\r\n            type='password'\r\n            placeholder='确认密码'\r\n            name='password2'\r\n            minLength='6'\r\n            value={password2}\r\n            onChange={(e) => onChange(e)}\r\n          />\r\n        </div>\r\n        <input type='submit' className='btn btn-primary' value='注册' />\r\n      </form>\r\n      <p className='my-1'>\r\n        已有账户？ <Link to='/login'>登录</Link>\r\n      </p>\r\n    </section>\r\n  );\r\n};\r\n\r\nRegister.propTypes = {\r\n  setAlert: PropTypes.func.isRequired,\r\n  register: PropTypes.func.isRequired,\r\n  isAuthenticated: PropTypes.bool,\r\n};\r\n\r\nconst mapStateToProps = (state) => ({\r\n  isAuthenticated: state.auth.isAuthenticated,\r\n});\r\n\r\nexport default connect(mapStateToProps, { setAlert, register })(Register);\r\n\r\n// glxn bullet\r\n// promise vs async await:\r\n// callback in promise constructor is executed immediately, just as no await in async function.\r\n// const test = new Promise((resolve, reject) => {\r\n//   console.log(111);\r\n//   resolve(1);\r\n// });\r\n// test.then((data) => console.log(data));\r\n// console.log(111111);\r\n\r\n// const test2 = async () => {\r\n//   console.log(222);\r\n//   const data = await 2; //此处加await变为异步，但没必要，因为2不return promise,加了也是立刻resolve,异步的原因是js单线程，目的是为了防止阻塞\r\n//   console.log(data);\r\n// };\r\n// test2();\r\n// console.log(222222);\r\n\r\n// Promise.resolve().then(() => console.log(0));\r\n// (async () => {\r\n//   await console.log(1);\r\n//   console.log(2); //then(()=>console.log2)\r\n//   console.log(3); //then(()=>{console.log(2);console.log(3)}\r\n//   await console.log(3); //then(()=>console.log(2)).then(()=>console.log(3))\r\n//   console.log(4);\r\n// })();\r\n// console.log(5);\r\n","import React, { Fragment, useState } from 'react';\r\nimport { Link, Redirect } from 'react-router-dom';\r\nimport { connect } from 'react-redux';\r\nimport PropTypes from 'prop-types';\r\nimport { login } from '../../actions/auth'; //===glxn定义\r\n\r\n//下面两个login都去掉()才不报错。\r\n// console.log(login() + 'login1');\r\nconst Login = ({ login, isAuthenticated }) => {\r\n  //===glxn使用\r\n  // console.log(login() + 'logim2');\r\n  const [formData, setFormData] = useState({\r\n    email: '',\r\n    password: '',\r\n  });\r\n\r\n  const { email, password } = formData;\r\n\r\n  const onChange = (e) => {\r\n    setFormData({ ...formData, [e.target.name]: e.target.value });\r\n  };\r\n\r\n  const onSubmit = (e) => {\r\n    e.preventDefault();\r\n\r\n    login({ email, password });\r\n  };\r\n\r\n  //redirect if logged in\r\n  if (isAuthenticated) {\r\n    return <Redirect to='/send' />;\r\n  }\r\n\r\n  return (\r\n    <section className='container'>\r\n      {/* <div className='alert alert-danger'>Invalid credentials</div> */}\r\n      <h1 className='large text-primary'>登录 APP</h1>\r\n      <p className='lead'>\r\n        <i className='fas fa-user'></i> 登入账户\r\n      </p>\r\n      {/* 这里action似乎永远没用。成功了被redirect,失败了停在原地 */}\r\n      <form className='form' action='/send' onSubmit={(e) => onSubmit(e)}>\r\n        <div className='form-group'>\r\n          <input\r\n            type='email'\r\n            placeholder='邮箱'\r\n            name='email'\r\n            value={email}\r\n            onChange={(e) => {\r\n              onChange(e);\r\n            }}\r\n            required\r\n          />\r\n        </div>\r\n        <div className='form-group'>\r\n          <input\r\n            type='password'\r\n            placeholder='密码'\r\n            name='password'\r\n            value={password}\r\n            onChange={(e) => {\r\n              onChange(e);\r\n            }}\r\n          />\r\n        </div>\r\n        <input type='submit' className='btn btn-primary' value='Login' />\r\n      </form>\r\n      <p className='my-1'>\r\n        没有账户？ <Link to='/register'>注册</Link>\r\n      </p>\r\n      ;\r\n    </section>\r\n  );\r\n};\r\n\r\nLogin.propTypes = {\r\n  login: PropTypes.func.isRequired,\r\n  isAuthenticated: PropTypes.bool,\r\n};\r\n\r\nconst mapStateToProps = (state) => ({\r\n  isAuthenticated: state.auth.isAuthenticated,\r\n});\r\n\r\nexport default connect(mapStateToProps, { login })(Login);\r\n","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport { connect } from 'react-redux';\r\n\r\nconst Alert = ({ alerts }) =>\r\n  alerts !== null &&\r\n  alerts.length > 0 &&\r\n  alerts.map((alert) => (\r\n    <div key={alert.id} className={`alert alert-${alert.alertType}`}>\r\n      {alert.msg}\r\n    </div>\r\n  ));\r\n\r\nAlert.propTypes = {\r\n  alerts: PropTypes.array.isRequired,\r\n};\r\n\r\nconst mapStateToProps = (state) => ({\r\n  alerts: state.alert,\r\n});\r\n\r\nexport default connect(mapStateToProps)(Alert);\r\n","import React, { useState, Fragment } from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport { connect } from 'react-redux';\r\nimport { addComment } from '../../actions/post';\r\n\r\nconst CommentForm = ({ postId, addComment }) => {\r\n  const [text, setText] = useState('');\r\n\r\n  const onSubmit = (e) => {\r\n    e.preventDefault();\r\n    addComment(postId, { text });\r\n    setText('');\r\n  };\r\n\r\n  const onChange = (e) => setText(e.target.value);\r\n\r\n  return (\r\n    <Fragment>\r\n      <div className='post-form'>\r\n        <div className='bg-primary p'>\r\n          <h3>回复</h3>\r\n        </div>\r\n        <form className='form my-1' action='/' onSubmit={(e) => onSubmit(e)}>\r\n          <textarea\r\n            name='text'\r\n            cols='30'\r\n            rows='5'\r\n            placeholder=''\r\n            onChange={(e) => {\r\n              onChange(e);\r\n            }}\r\n            value={text}\r\n            required\r\n          ></textarea>\r\n\r\n          <input\r\n            type='file'\r\n            style={{ display: 'none' }}\r\n            name='test'\r\n            id='file'\r\n            multiple\r\n          />\r\n          <input type='submit' className='btn btn-dark my-1' value='发布' />\r\n        </form>\r\n      </div>\r\n    </Fragment>\r\n  );\r\n};\r\n\r\nCommentForm.propTypes = {\r\n  addComment: PropTypes.func.isRequired,\r\n};\r\n\r\nexport default connect(null, { addComment })(CommentForm);\r\n","import React, { Fragment } from 'react';\r\nimport { connect } from 'react-redux';\r\nimport PropTypes from 'prop-types';\r\nimport { Link } from 'react-router-dom';\r\nimport Moment from 'react-moment';\r\nimport { deleteComment } from '../../actions/post';\r\nimport './commentItem.css';\r\n\r\nexport const CommentItem = ({\r\n  postId,\r\n  comment: { _id, text, name, user, date },\r\n  auth,\r\n  deleteComment,\r\n}) => {\r\n  return (\r\n    <div class='comment bg-white p-1 my-1'>\r\n      <div>\r\n        <p class='my-1'>{text}</p>\r\n        <p\r\n          class='post-date'\r\n          style={{ fontSize: '15px', color: 'rgb(200,200,200)' }}\r\n        >\r\n          {name} 回复于 <Moment format='YYYY/MM/DD  h:mm:ss a'>{date}</Moment>\r\n          {!auth.loading && user === (auth.user ? auth.user._id : null) && (\r\n            <span className='cp-2'>\r\n              <button\r\n                onClick={(e) => deleteComment(postId, _id)}\r\n                type='button'\r\n                style={{\r\n                  float: 'right',\r\n                  background: 'white',\r\n                  color: 'rgb(200,200,200)',\r\n                }}\r\n                className='btn btn-danger'\r\n              >\r\n                删除\r\n              </button>{' '}\r\n              <button\r\n                onClick={(e) => deleteComment(postId, _id)}\r\n                type='button'\r\n                style={{\r\n                  float: 'right',\r\n                  background: 'white',\r\n                  color: 'rgb(200,200,200)',\r\n                }}\r\n                className='btn btn-danger'\r\n              >\r\n                编辑\r\n              </button>\r\n            </span>\r\n          )}\r\n        </p>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nCommentItem.propTypes = {\r\n  postId: PropTypes.number.isRequired,\r\n  comment: PropTypes.object.isRequired,\r\n  auth: PropTypes.object.isRequired,\r\n  deleteComment: PropTypes.func.isRequired,\r\n};\r\n\r\nconst mapStateToProps = (state) => ({ auth: state.auth });\r\n\r\nexport default connect(mapStateToProps, { deleteComment })(CommentItem);\r\n","import ImageGallery from 'react-image-gallery';\r\nimport React, { Fragment, useCallback } from 'react';\r\nimport 'react-image-gallery/styles/css/image-gallery.css';\r\n\r\n// import image1 from '../../../../img/image1.jpg';\r\n// import image2 from '../../../../img/image2.jpg';\r\n// import image3 from '../../../../img/image3.jpg';\r\n// import image4 from '../../../../img/image4.jpg';\r\n// import image5 from '../../../../img/image5.jpg';\r\n\r\n//可以考虑下这个从parent接受prop和另一个image从store接受prop\r\nconst Index = ({ items }) => {\r\n  return (\r\n    <div>\r\n      <ImageGallery\r\n        items={items}\r\n        showFullscreenButton={false}\r\n        showPlayButton={false}\r\n        showNav={true}\r\n        showBullets={true}\r\n        showThumbnails={false}\r\n        autoPlay={false}\r\n        style={{ width: '100%' }}\r\n      />\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Index;\r\n","import React, { Fragment, useEffect } from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport { connect } from 'react-redux';\r\nimport Spinner from '../layout/spinner';\r\nimport { deletePost, getPost, loadingf } from '../../actions/post';\r\nimport { Link } from 'react-router-dom';\r\nimport Moment from 'react-moment';\r\nimport CommentForm from './commentForm';\r\nimport CommentItem from './commentItem';\r\nimport { PROXY } from '../../utils/consts';\r\nimport Image from './image';\r\nimport './post.css';\r\n\r\nfunction Post({ auth, getPost, post: { post, loading }, match }) {\r\n  useEffect(() => {\r\n    // 和post === null效果相同; //不同。useeffect is called after render.https://reactjs.org/docs/hooks-effect.html\r\n    const query = JSON.stringify({ id: match.params.id });\r\n    getPost({ query });\r\n  }, [getPost]);\r\n\r\n  if (loading || post === null) {\r\n    return <Spinner />;\r\n  }\r\n  //post===null气死我了\r\n  else {\r\n    const { _id, text, name, user, comments, postDate, imageUrl, type } = post;\r\n    const images = [];\r\n    imageUrl.forEach((el) =>\r\n      images.push({\r\n        original: el ? PROXY + '/' + el.url : null,\r\n      })\r\n    );\r\n    return (\r\n      <section className='container'>\r\n        <Link to={`/posts/${type}`} className='btn'>\r\n          返回\r\n        </Link>\r\n        <div className='post1 bg-white p-1 my-1'>\r\n          <div>\r\n            <Image items={images} />\r\n          </div>\r\n          <div>\r\n            <p className='my-10'>{text}</p>\r\n            <p className='post-date'>\r\n              {name} 发布于{' '}\r\n              <Moment format='YYYY/MM/DD  h:mm:ss a'>{postDate}</Moment>\r\n              {!auth.loading && user === (auth.user ? auth.user._id : null) && (\r\n                <span className='bs-1'>\r\n                  <button\r\n                    style={{\r\n                      float: 'right',\r\n\r\n                      background: 'white',\r\n                      color: 'rgb(200,200,200)',\r\n                    }}\r\n                    type='button'\r\n                    className='btn btn-danger'\r\n                    onClick={() => deletePost(_id)}\r\n                  >\r\n                    删除\r\n                  </button>\r\n                  <button\r\n                    style={{\r\n                      float: 'right',\r\n\r\n                      background: 'white',\r\n                      color: 'rgb(200,200,200)',\r\n                    }}\r\n                    type='button'\r\n                    className='btn btn-danger'\r\n                    onClick={() => deletePost(_id)}\r\n                  >\r\n                    编辑\r\n                  </button>\r\n                </span>\r\n              )}\r\n            </p>\r\n            {/* <Link to={`/posts/${type}/${_id}`} className='btn btn-primary'>\r\n              查看详情\r\n            </Link> */}\r\n            {/* 两种模式，一种是link to, 在新route发送请求，另一种是button, click发送请求。如果Linkto然后click发送请求，而不在route useeffect发送请求，哪个好？ */}\r\n          </div>\r\n        </div>\r\n        <CommentForm postId={post._id} />\r\n        <div className='comment'>\r\n          {post.comments.map((comment) => (\r\n            <CommentItem\r\n              key={comment._id}\r\n              comment={comment}\r\n              postId={post._id}\r\n            />\r\n          ))}\r\n        </div>\r\n      </section>\r\n    );\r\n  }\r\n}\r\n\r\nPost.propTypes = {\r\n  getPost: PropTypes.func.isRequired,\r\n  post: PropTypes.object.isRequired,\r\n  auth: PropTypes.object.isRequired,\r\n  loadingf: PropTypes.func.isRequired,\r\n};\r\n\r\nconst mapStateToProps = (state) => ({ post: state.post, auth: state.auth });\r\nexport default connect(mapStateToProps, { getPost, loadingf })(Post);\r\n","import axios from 'axios';\r\nimport React, { useState, Fragment, useEffect } from 'react';\r\nimport { Redirect } from 'react-router-dom';\r\nimport { connect } from 'react-redux';\r\nimport { PROXY } from '../../utils/consts';\r\nimport { useHistory } from 'react-router-dom';\r\nimport { setAlert } from '../../actions/alert';\r\n\r\n// import{withRouter } from 'react-router-dom'\r\n// https://reacttraining.com/blog/react-router-v5-1/\r\n// https://stackoverflow.com/questions/42875949/react-router-v4-redirect-not-working\r\n// https://stackoverflow.com/questions/49738249/react-router-v4-redirecting-on-form-submit\r\n// https://ui.dev/react-router-v4-programmatically-navigate/\r\n\r\n//必须connect dispatch to props\r\n//t1 is trigger when called, dispatch(...)\r\nconst t1 = (data, config, history, type) => async (dispatch) => {\r\n  try {\r\n    const res = await axios.post(`${PROXY}/api/post`, data, config);\r\n    // console.log(setAlert('发布成功,三秒后跳转...', 'success', 3000));\r\n    dispatch(setAlert('发布成功,三秒后跳转...', 'success', 3000));\r\n    setTimeout(() => history.push(`/posts/${type}`), 3000);\r\n  } catch (error) {}\r\n};\r\n\r\nconst SendPost = ({ t1 }) => {\r\n  const [formData, setFormData] = useState({\r\n    text: '',\r\n    zipCode: '',\r\n    type: '',\r\n    model: '',\r\n    make: '',\r\n    year: '',\r\n    odo: '',\r\n    names: null,\r\n    files: [],\r\n  });\r\n\r\n  // let name;\r\n  // const files = document.querySelector('#file');\r\n  // useEffect(() => {\r\n  //   console.log(files);\r\n  // }, [formData]);\r\n  const { text, zipCode, files } = formData;\r\n\r\n  //二手车\r\n  const { price, year, make, odo } = formData;\r\n\r\n  // 租房\r\n  //price\r\n\r\n  //求助\r\n\r\n  //闲置\r\n  //price\r\n\r\n  let { type } = formData;\r\n  const history = useHistory();\r\n  const onChange = (e) => {\r\n    setFormData({ ...formData, [e.target.name]: e.target.value });\r\n    // console.log(formData); return last time formdata\r\n    console.log(formData);\r\n  };\r\n\r\n  const onSubmit = async (e) => {\r\n    e.preventDefault();\r\n\r\n    const newPost = { text, zipCode, year, make, odo, price, type, files };\r\n\r\n    try {\r\n      const config = {\r\n        headers: {},\r\n      };\r\n      const data = new FormData();\r\n\r\n      files.forEach((file) => data.append('files', file));\r\n\r\n      // console.log(data);\r\n      data.append('json', JSON.stringify(newPost));\r\n      // for (let key of data.entries()) {\r\n      //   console.log(key[0] + ', ' + key[1]);\r\n      // }\r\n\r\n      console.log(t1);\r\n      t1(data, config, history, type);\r\n      // return <Redirect to='/send' />;\r\n    } catch (err) {\r\n      console.log(err.response.data);\r\n    }\r\n  };\r\n\r\n  const deleteFile = (e) => {\r\n    const name = e.target.closest('p').id;\r\n    const newFiles = formData.files.filter((file) => file.name !== name);\r\n    const newNames = newFiles.map((file) => file.name);\r\n    setFormData({ ...formData, names: newNames, files: newFiles });\r\n  };\r\n\r\n  const inputChange = (e) => {\r\n    setFormData({\r\n      ...formData,\r\n      files: Array.from(e.target.files),\r\n      //  don't call funcntions in usestate.否则deleteFile传入的formdata永远是这次的状态而不会更新。和closure有关。\r\n      // names: Array.from(e.target.files).map((file) => (\r\n      //   <p key={file.name} id={file.name}>\r\n      //     {file.name} <button onClick={(e) => deleteFile(e)}>test2</button>\r\n      //   </p>\r\n      names: Array.from(e.target.files).map((file) => file.name),\r\n    });\r\n  };\r\n\r\n  return (\r\n    <section className='container'>\r\n      <div className='post-form'>\r\n        <div className='bg-primary p'>\r\n          <h3>发布信息</h3>\r\n        </div>\r\n        <form className='form my-1' action='/' onSubmit={(e) => onSubmit(e)}>\r\n          <input\r\n            type='text'\r\n            name='type'\r\n            placeholder='租房/二手车/闲置/求助'\r\n            onChange={(e) => {\r\n              onChange(e);\r\n            }}\r\n          />\r\n          <textarea\r\n            name='text'\r\n            cols='30'\r\n            rows='5'\r\n            placeholder=''\r\n            onChange={(e) => {\r\n              onChange(e);\r\n            }}\r\n            required\r\n          ></textarea>\r\n          <input\r\n            type='text'\r\n            name='zipCode'\r\n            placeholder='ZIPCODE'\r\n            maxLength='5'\r\n            onChange={(e) => {\r\n              onChange(e);\r\n            }}\r\n          />\r\n          {type === '租房' || type === '二手车' ? (\r\n            <input\r\n              type='text'\r\n              name='price'\r\n              placeholder='价格'\r\n              onChange={(e) => {\r\n                onChange(e);\r\n              }}\r\n              required\r\n            />\r\n          ) : null}\r\n          {type === '闲置' ? (\r\n            <input\r\n              type='text'\r\n              name='price'\r\n              placeholder='价格（免费请填0）'\r\n              onChange={(e) => {\r\n                onChange(e);\r\n              }}\r\n              required\r\n            />\r\n          ) : null}\r\n          {type === '二手车' ? (\r\n            <Fragment>\r\n              <input\r\n                type='text'\r\n                name='year'\r\n                placeholder='年份'\r\n                onChange={(e) => {\r\n                  onChange(e);\r\n                }}\r\n              />{' '}\r\n              <input\r\n                type='text'\r\n                name='make'\r\n                placeholder='厂商'\r\n                onChange={(e) => {\r\n                  onChange(e);\r\n                }}\r\n              />\r\n              <input\r\n                type='text'\r\n                name='odo'\r\n                placeholder='里程'\r\n                onChange={(e) => {\r\n                  onChange(e);\r\n                }}\r\n              />\r\n            </Fragment>\r\n          ) : null}\r\n          <input\r\n            className='btn btn-dark my-1'\r\n            type='button'\r\n            value='插入图片（最多10张）'\r\n            onClick={() => document.getElementById('file').click()}\r\n          />\r\n\r\n          <input\r\n            type='file'\r\n            style={{ display: 'none' }}\r\n            name='test'\r\n            id='file'\r\n            onChange={(e) => inputChange(e)}\r\n            multiple\r\n          />\r\n          <input type='submit' className='btn btn-dark my-1' value='发布' />\r\n        </form>\r\n      </div>\r\n      {formData.names\r\n        ? formData.names.map((name) => (\r\n            <p key={name} id={name}>\r\n              {name}{' '}\r\n              <i\r\n                onClick={(e) => deleteFile(e)}\r\n                className='far fa-trash-alt'\r\n              ></i>\r\n            </p>\r\n          ))\r\n        : null}\r\n    </section>\r\n  );\r\n};\r\n\r\n// const mapStateToProps = (state) => ({\r\n//   user: state.auth.user,\r\n// }); //user is not needed cuz the axios global header.\r\n\r\nexport default connect(null, { t1 })(SendPost);\r\n","import React from 'react';\r\nimport { Route, Redirect } from 'react-router-dom';\r\nimport PropTypes from 'prop-types';\r\nimport { connect } from 'react-redux';\r\n\r\nconst PrivateRoute = ({\r\n  component: Component,\r\n  auth: { isAuthenticated, loading },\r\n  ...rest\r\n}) => (\r\n  <Route\r\n    {...rest}\r\n    render={(props) =>\r\n      !isAuthenticated && !loading ? (\r\n        <Redirect to='/login' />\r\n      ) : (\r\n        <Component {...props} />\r\n      )\r\n    }\r\n  />\r\n);\r\n\r\nPrivateRoute.propTypes = { auth: PropTypes.object.isRequired };\r\n\r\nconst mapStateToProps = (state) => ({\r\n  auth: state.auth,\r\n});\r\n\r\nexport default connect(mapStateToProps)(PrivateRoute);\r\n","import { SET_ALERT, REMOVE_ALERT } from '../actions/types';\r\n\r\nconst initalState = [];\r\n\r\nexport default function alert(state = initalState, action) {\r\n  const { type, payload } = action;\r\n  switch (type) {\r\n    case SET_ALERT:\r\n      return [...state, payload];\r\n    case REMOVE_ALERT:\r\n      return state.filter((alert) => alert.id !== payload);\r\n    default:\r\n      return state;\r\n  }\r\n}\r\n","import {\r\n  REGISTER_SUCCESS,\r\n  REGISTER_FAIL,\r\n  USER_LOADED,\r\n  AUTH_ERROR,\r\n  LOGIN_SUCCESS,\r\n  LOGIN_FAIL,\r\n  LOG_OUT,\r\n} from '../actions/types';\r\n\r\nconst initialState = {\r\n  token: localStorage.getItem('token'),\r\n  isAuthenticated: null,\r\n  loading: true,\r\n  user: null,\r\n};\r\n\r\nexport default function auth(state = initialState, action) {\r\n  const { type, payload } = action;\r\n  switch (type) {\r\n    case USER_LOADED:\r\n      return {\r\n        ...state,\r\n        isAuthenticated: true,\r\n        loading: false,\r\n        user: payload,\r\n      };\r\n    case REGISTER_SUCCESS:\r\n    case LOGIN_SUCCESS:\r\n      localStorage.setItem('token', payload.token);\r\n      return { ...state, ...payload, isAuthenticated: true, loading: false };\r\n    case REGISTER_FAIL:\r\n    case AUTH_ERROR:\r\n    case LOGIN_FAIL:\r\n    case LOG_OUT:\r\n      localStorage.removeItem('token');\r\n      return {\r\n        ...state,\r\n        token: null,\r\n        isAuthenticated: false,\r\n        loading: false,\r\n        user: null,\r\n      };\r\n    default:\r\n      return state;\r\n  }\r\n}\r\n","import {\r\n  GET_POSTS,\r\n  POST_ERROR,\r\n  CHANGE_PAGE,\r\n  LOADING,\r\n  DELETE_POST,\r\n  GET_POST,\r\n  ADD_COMMENT,\r\n  REMOVE_COMMENT,\r\n} from '../actions/types';\r\n\r\nconst initialState = {\r\n  count: 0,\r\n  posts: [],\r\n  post: null,\r\n  loading: true,\r\n  error: {},\r\n  current: 1,\r\n};\r\n\r\nexport default function (state = initialState, action) {\r\n  const { type, payload } = action;\r\n\r\n  switch (type) {\r\n    case GET_POSTS:\r\n      return {\r\n        ...state,\r\n        current: payload.page,\r\n        posts: payload.currentposts.docs,\r\n        count: payload.count,\r\n        loading: false,\r\n      };\r\n    case CHANGE_PAGE:\r\n      return {\r\n        ...state,\r\n        posts: payload.currentposts.docs,\r\n        current: payload.page,\r\n        loading: false,\r\n      };\r\n    case GET_POST:\r\n      return {\r\n        ...state,\r\n        post: payload,\r\n        loading: false,\r\n      };\r\n    case DELETE_POST: {\r\n      return {\r\n        ...state,\r\n        posts: state.posts.filter((post) => post._id !== payload),\r\n        loading: false,\r\n      };\r\n    }\r\n    case POST_ERROR:\r\n      return {\r\n        ...state,\r\n        error: payload,\r\n        loading: false,\r\n      };\r\n    case LOADING:\r\n      return {\r\n        ...state,\r\n        loading: true,\r\n      };\r\n    case ADD_COMMENT:\r\n      return {\r\n        ...state,\r\n        post: { ...state.post, comments: payload },\r\n        loading: false,\r\n      };\r\n    case REMOVE_COMMENT:\r\n      return {\r\n        ...state,\r\n        post: {\r\n          ...state.post,\r\n          comments: state.post.comments.filter(\r\n            (comments) => comments._id !== payload\r\n          ),\r\n        },\r\n        loading: false,\r\n      };\r\n    default:\r\n      return state;\r\n  }\r\n}\r\n","import { CHANGE_ZIPCODE } from '../actions/types';\r\n\r\nconst initalState = { zipCode: '00000' };\r\n\r\nexport default function zip(state = initalState, action) {\r\n  const { type, payload } = action;\r\n  switch (type) {\r\n    case CHANGE_ZIPCODE:\r\n      return { zipCode: payload.zip };\r\n    default:\r\n      return state;\r\n  }\r\n}\r\n","import { combineReducers } from 'redux';\r\nimport alert from './alert';\r\nimport auth from './auth';\r\nimport post from './post';\r\nimport zipCode from './zipCode';\r\n\r\nexport default combineReducers({ alert, auth, post, zipCode });\r\n","import { createStore, applyMiddleware } from 'redux';\r\nimport { composeWithDevTools } from 'redux-devtools-extension';\r\nimport thunk from 'redux-thunk';\r\nimport rootReducer from './reducers';\r\n\r\nconst initialState = {};\r\n\r\nconst middleware = [thunk];\r\n\r\n//no thunk:\r\n// Unhandled Rejection (Error): Actions must be plain objects. Use custom middleware for async actions.\r\n\r\nconst store = createStore(\r\n  rootReducer,\r\n  initialState,\r\n  composeWithDevTools(applyMiddleware(...middleware))\r\n);\r\n\r\nexport default store;\r\n","import './App.css';\nimport React, { Fragment, useEffect } from 'react';\nimport Navbar from './componets/layout/navbar';\nimport Landing from './componets/layout/landing';\nimport Register from './componets/auth/register';\nimport Login from './componets/auth/login';\nimport { BrowserRouter as Router, Route, Switch } from 'react-router-dom';\nimport Alert from './componets/layout/alert';\nimport Post from './componets/post/post';\nimport getPosts from './componets/posts/getPosts';\nimport sendPost from './componets/posts/sendPost';\nimport PrivateRoute from './componets/routing/privateRoute';\n//redux\nimport { Provider } from 'react-redux';\nimport store from './store';\nimport setAuthToken from './utils/setAuthToken';\nimport { loadUser } from './actions/auth';\n\nif (localStorage.token) {\n  setAuthToken(localStorage.token);\n}\n\nconst App = () => {\n  useEffect(() => {\n    store.dispatch(loadUser());\n  }, []);\n\n  return (\n    //2nd fragment can't use section or blank.\n    <Provider store={store}>\n      <Router basename='app'>\n        <Fragment>\n          <Navbar />\n          <Alert />\n          <Route exact path='/' component={Landing} />\n          <Fragment>\n            <Switch>\n              <Route exact path='/register' component={Register} />\n              <Route exact path='/login' component={Login} />\n              <PrivateRoute exact path='/send' component={sendPost} />\n              <Route exact path='/posts/:type' component={getPosts} />\n              <Route exact path='/posts/' component={getPosts} />\n              <Route exact path='/posts/:type/:id' component={Post} />\n              {/* backend 好像不管用 //// 教学可以  */}\n            </Switch>\n          </Fragment>\n        </Fragment>\n      </Router>\n    </Provider>\n  );\n};\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\n// import './index.css';\n// import reportWebVitals from './reportWebVitals';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\n// reportWebVitals();\n"],"sourceRoot":""}